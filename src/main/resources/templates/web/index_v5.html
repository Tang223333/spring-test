<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">


<!-- Mirrored from www.zi-han.net/theme/hplus/index_v5.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 20 Jan 2016 14:18:51 GMT -->
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>主页</title>

    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <link th:href="@{/layui/css/layui.css}" rel="stylesheet"  media="all">
    <script th:src="@{/layui/layui.js}" charset="utf-8"></script>
    <style>
        .zhuti1{
            width: 20%;
            height: 200px;
            margin-left: 4%;
            margin-top: 50px;
            overflow: hidden;
        }
        .tupian{
            height: 180px;
            width: 100%;
        }
        .wenzi{
            color: #FFFFFF;
            height: 20px;
            width: 100%;
        }
        .juzhong{
            margin:auto;
        }

    </style>

</head>

<body style="background: #242424">

<script th:inline="javascript" >
    var s= [[${aid}]];
    document.cookie=s;
    var num= [[${msg}]];
</script>

<!--导航条-->
<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Better</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav" style="margin-left: 50%;">
                <li class="active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">游戏 <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">首页</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="/fenye">分类</a></li>
                    </ul>
                </li>
                <li><a href="/forum">论坛</a></li>
                <li><a href="/news_main">新闻</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">个人中心 <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a onclick="goto()" id="sg" >收藏关注</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a onclick="ud()">账户信息</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a onclick="alter2()">密码修改</a></li>
                    </ul>
                </li>
            </ul>
            <div class="navbar-form navbar-left" href="">
                <div class="form-group">
                    <input type="text" id="gameName" class="form-control" placeholder="Search">
                </div>
                <button type="submit" onclick="go()" class="btn btn-default">Go</button>
            </div>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#">退出</a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->

    <!--轮播图-->
    <div style="height: 700px;width: 100%;overflow: hidden">
        <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                <li data-target="#carousel-example-generic" data-slide-to="2"></li>
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">
                <div class="item active">
                    <img src="img/01.jpg" alt="...">

                </div>
                <div class="item">
                    <img src="img/02.jpg" alt="...">

                </div>
                <div class="item">
                    <img src="img/03.jpg" alt="...">

                </div>
            </div>

            <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
</nav>
<p style="margin: 20px 50px;font-size: 18px;color: white ">有那些好玩的</p>
<!--主体第一部分-->
<div class="container-fluid ">
    <!--2.定义行-->
    <div class="row">
        <div class="col-lg-3 zhuti1" onclick="sel(0)" >
            <div class="col-lg-3 tupian">
                <img id="img_1" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_1">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(1)" >
            <div class="col-lg-3 tupian">
                <img id="img_2" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_2">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(2)">
            <div class="col-lg-3 tupian">
                <img id="img_3" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_3">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(3)" >
            <div class="col-lg-3 tupian">
                <img id="img_4" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_4">想加什么加</p>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid ">
    <!--2.定义行-->
    <div class="row">
        <div class="col-lg-3 zhuti1" onclick="sel(4)" >
            <div class="col-lg-3 tupian">
                <img id="img_5" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_5">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(5)" >
            <div class="col-lg-3 tupian">
                <img id="img_6" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_6">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(6)" >
            <div class="col-lg-3 tupian">
                <img id="img_7" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_7">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(7)" >
            <div class="col-lg-3 tupian">
                <img id="img_8" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_8">想加什么加</p>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid ">
    <!--2.定义行-->
    <div class="row">
        <div class="col-lg-3 zhuti1" onclick="sel(8)" >
            <div class="col-lg-3 tupian">
                <img id="img_9" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_9">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(9)" >
            <div class="col-lg-3 tupian">
                <img id="img_10" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_10">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(10)">
            <div class="col-lg-3 tupian">
                <img id="img_11" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_11">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(11)">
            <div class="col-lg-3 tupian">
                <img id="img_12" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_12">想加什么加</p>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid ">
    <!--2.定义行-->
    <div class="row">
        <div class="col-lg-3 zhuti1" onclick="sel(12)" >
            <div class="col-lg-3 tupian">
                <img id="img_13" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_13">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(13)" >
            <div class="col-lg-3 tupian">
                <img id="img_14" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_14">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(14)">
            <div class="col-lg-3 tupian">
                <img id="img_15" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_15">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(15)">
            <div class="col-lg-3 tupian">
                <img id="img_16" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_16">想加什么加</p>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid ">
    <!--2.定义行-->
    <div class="row">
        <div class="col-lg-3 zhuti1" onclick="sel(16)">
            <div class="col-lg-3 tupian">
                <img id="img_17" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_17">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(17)">
            <div class="col-lg-3 tupian">
                <img id="img_18" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_18">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(18)">
            <div class="col-lg-3 tupian">
                <img id="img_19" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_19">想加什么加</p>
            </div>
        </div>
        <div class="col-lg-3 zhuti1" onclick="sel(19)">
            <div class="col-lg-3 tupian">
                <img id="img_20" src="img/1.png" class="tupian"/>
            </div>
            <div class="col-lg-3 wenzi">
                <p id="p_20">想加什么加</p>
            </div>
        </div>
    </div>
</div>

<script>
    var	data="";
    $.ajax({
        url: "GameDM/find20",
        type: 'GET',
        success:function (s) {
            data=s;
            for (var i = 0; i < data.data.length; i++) {
                if(data.data[i].imgs==""){
                    $("#img_"+(i+1)).attr("src", "img/wu.jpg")
                    s=data.data[i].name;
                    document.getElementById("p_"+(i+1)).innerText=s
                }else{
                    $("#img_"+(i+1)).attr("src", ""+data.data[i].imgs+"")
                    s=data.data[i].name
                    document.getElementById("p_"+(i+1)).innerText=s
                }
            }
        },
        error:function (data) {

        }
    });

    function sel(index){
        console.log(data.data.length)
        if(index<(data.data.length)){
            window.location.href="game_one?id="+data.data[index].id;
        }else{
            alert("没得")
        }
    }

    function goto() {
        window.location.href="CollectConcern?aid="+s;
    }

    function ud() {
        $.ajax({
            url: "/UserAndAccount/findByAid",
            type: 'POST',
            data: {
                aid:s,
            },
            success:function (data) {
                layui.use('layer', function(){
                    var layer = layui.layer;
                    layer.open({
                        title: ['修改用户信息'],
                        type: 2,
                        content: 'page/userAccountUpdate2.html',
                        shadeClose: true,
                        area: ['550px', '550px'],
                        btn: ['确定', '取消'],
                        success: function (layero,index) {
                            var body = layui.layer.getChildFrame('body', index);
                            body.find(".id").val(data.data.id);
                            body.find(".username").val(data.data.name);
                            body.find(".number").val(data.data.number);
                            body.find(".address").val(data.data.address);
                            body.find(".sex").val(data.data.sex);
                            body.find(".birthday").val(data.data.birthday);
                            body.find(".style").val(data.data.style);
                            body.find(".accountName").val(data.data.accountName);
                            body.find(".email").val(data.data.email);
                            body.find(".phone").val(data.data.phone);
                            body.find(".type").val(data.data.type);
                            body.find(".spans").val(data.data.logo);
                            layui.form.render();
                            layui.form.verify();
                        },
                        btn1: function(index, layero){
                            var body = layui.layer.getChildFrame('body', index);
                            var iframeWin = window[layero.find('iframe')[0]['name']];
                            alert("请确定填完所有信息哦")
                            $.ajax({
                                url:"UserAndAccount/update",
                                type:'POST',
                                data:{
                                    'id':body.find('.id').val(),
                                    'username':body.find('.username').val(),
                                    'number':body.find('.number').val(),
                                    'address':body.find('.address').val(),
                                    'sex':body.find('.sex').val(),
                                    'birthday':body.find('.birthday').val(),
                                    'style':body.find('.style').val(),
                                    'accountName':body.find('.accountName').val(),
                                    'email':body.find('.email').val(),
                                    'phone':body.find('.phone').val(),
                                    'type':body.find('.type').val(),
                                    'logo':body.find('.logo').val(),
                                },
                                dataType:'json',
                                success:function(data){
                                    layer.closeAll();
                                    if (data.error_code==0){
                                        layer.msg(data.reason);
                                    }else {
                                        layer.msg(data.reason);
                                    }
                                }
                            });
                        },
                        btn2: function(index, layero){
                            layer.closeAll();
                        },
                        cancel:function () {
                            window.location.reload();
                        },
                        end:function () {
                            window.location.reload();
                        }
                    });
                });
            },
            error:function (data) {
            }
        });
    }

    function alter2() {
        layui.use('layer', function(){
            var layer = layui.layer;
            layer.open({
                title: ['修改用户信息'],
                type: 2,
                content: 'page/pasUp.html',
                shadeClose: true,
                area: ['550px', '550px'],
                btn: ['确定', '取消'],
                success: function (layero,index) {
                    var body = layui.layer.getChildFrame('body', index);
                    console.log(s);
                    body.find(".id").val(s);
                    layui.form.render();
                    layui.form.verify();
                },
                btn1: function(index, layero){
                    var body = layui.layer.getChildFrame('body', index);
                    var iframeWin = window[layero.find('iframe')[0]['name']];
                    $.ajax({
                        url:"account/pasUp",
                        type:'POST',
                        data:{
                            'id':body.find('.id').val(),
                            'oldPas':body.find('.oldPas').val(),
                            'newPas':body.find('.newPas').val(),
                            'newPas2':body.find('.newPas2').val(),
                        },
                        dataType:'json',
                        success:function(data){
                            layer.closeAll();
                            if (data.error_code==0){
                                layer.msg(data.reason);
                            }else {
                                layer.msg(data.reason);
                            }
                        }
                    });
                },
                btn2: function(index, layero){
                    layer.closeAll();
                },
                cancel:function () {
                    window.location.reload();
                },
                end:function () {
                    window.location.reload();
                }
            });
        });
    }

    function go() {
        var game_name=$("#gameName").val();
        $.ajax({
            url:"/game/findByName",
            type:'POST',
            data:{
                name:game_name,
            },
            success:function(data){
                console.log(data)
                if (data.error_code==0){
                    window.location.href="game_one?id="+data.data.id;
                }else {
                    alert("没找到");
                }
            }
        });
    }

</script>

</body>
</html>
